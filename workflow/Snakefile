import pathlib
import shutil

from snakemake.utils import validate


# Read Configuration
configfile: 'config/config_phys_analysis.yml'
validate(config, "schemas/config_phys_analysis.schema.yml")

# Extract variables from configuration
## Input/output

# Target rules
rule all:
    input: folder_spherecrop_mask, folder_spherecrop_aligned, folder_spherecrop_dapiqc, cp_measurements_output, folder_cpout_masks, folder_cpout_imgs

# Varia
rule sync_to_cluster:
    shell:
         'rsync -rtu /home/vitoz/mnt/tmp/scratch/vitoz/Git/SpheroidPublication/analysis/phys vizano@cluster.s3it.uzh.ch:/data/vizano/Git/SpheroidPublication/analysis --progress --exclude=".*" --exclude="pkgs/" --exclude=".snakemake" --exclude="results/"'

rule sync_from_cluster:
    shell:
         'rsync -rtu vizano@cluster.s3it.uzh.ch:/data/vizano/Git/SpheroidPublication/analysis/phys /home/vitoz/mnt/tmp/scratch/vitoz/Git/SpheroidPublication/analysis  --progress --exclude=".*" --exclude="phys/resources" --exclude "phys/pkgs"'
rule clean:
    shell:
        "rm -R {folder_base}"

# Data retrieval
